# Maintainer: Batuhan Baserdem <baserdem.batuhan@gmail.com>
# vim: ft=PKGBUILD
pkgname=sbp-admin
pkgver=4.0
pkgrel=2
pkgdesc="SBP Meta Package: Administration"
arch=('any')
url="https://github.com/bbaserdem/Arch"
licence=(MIT)
validpgpkeys=('0B7151C823559DD8A7A04CE36426139E2F4C6CCE')
source=(
    'admin.etckeeper'
    'admin.install'
    'admin.reflect-service'
    'admin.reflect-timer'
    'admin.repo-build'
    'admin.repo-remove'
    'admin.repo-sync'
    'admin.tzupdate')
sha256sums=(SKIP SKIP SKIP SKIP SKIP SKIP SKIP SKIP) 
package() {
    # Create reflector timers
    install -dm 0755 "${pkgdir}/usr/lib/systemd"
    install -dm 0755 "${pkgdir}/usr/lib/systemd/system"
    install -Dm 0644 admin.reflect-service \
        "${pkgdir}/usr/lib/systemd/system/reflector.service"
    install -Dm 0644 admin.reflect-timer \
        "${pkgdir}/usr/lib/systemd/system/reflector.timer"
    # Install tzupdate service
    install -Dm 0644 admin.tzupdate \
        "${pkgdir}/usr/lib/systemd/system/tzupdate.service"
    # Install aur management scripts
    install -dm 0755 "${pkgdir}/usr/bin"
    install -Dm 0755 admin.repo-remove  "${pkgdir}/usr/bin/archrepo-remove"
    install -Dm 0755 admin.repo-sync    "${pkgdir}/usr/bin/archrepo-sync"
    install -Dm 0755 admin.repo-build   "${pkgdir}/usr/bin/archrepo-build"
    # Put etckeeper override to select pacman
    install -dm 0755 "${pkgdir}/etc/etckeeper"
    install -Dm 0755 admin.etckeeper    "${pkgdir}/etc/etckeeper/local.conf"
    #---Sys-admin
    depends=(
        'dbus'
        'etckeeper'
        'fcron'
        'htop'
        'logrotate'
        'lsb-release'
        'mlocate'
        'neofetch'
        'rasdaemon'
        'supervisor'
        'tzupdate')
    #---Permissions
    depends+=(
        'pam'
        'polkit'
        'sudo')
    #---Packaging
    depends+=(
        'aurutils'
        'devtools'
        'reflector'
        'pacman-contrib' 'pacman-cleanup-hook'
        'archlinux-appstream-data'
        'archlinux-keyring')
}
